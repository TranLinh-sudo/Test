-- /// 1. KHỞI TẠO DỊCH VỤ ///
local Players = game:GetService("Players")
local CoreGui = game:GetService("CoreGui")
local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")

-- /// 2. CẤU HÌNH GIAO DIỆN ///
local Theme = {
    Background = Color3.fromRGB(30, 30, 30),
    YellowBorder = Color3.fromRGB(255, 235, 59),
    Text = Color3.fromRGB(255, 255, 255),
    Button = Color3.fromRGB(50, 50, 50),
    SelectedTab = Color3.fromRGB(80, 80, 80),
    Red = Color3.fromRGB(255, 85, 85),
    Orange = Color3.fromRGB(255, 170, 0),
    BananaCatImage = "http://www.roblox.com/asset/?id=13693437997"
}

if CoreGui:FindFirstChild("BananaCatHub") then
    CoreGui.BananaCatHub:Destroy()
end

local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "BananaCatHub"
ScreenGui.Parent = CoreGui
ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

-- /// 3. NÚT ICON TRÒN ///
local OpenButton = Instance.new("ImageButton")
OpenButton.Name = "OpenButton"
OpenButton.Parent = ScreenGui
OpenButton.BackgroundColor3 = Theme.Background 
OpenButton.Position = UDim2.new(0.1, 0, 0.1, 0)
OpenButton.Size = UDim2.new(0, 45, 0, 45) 
OpenButton.Image = Theme.BananaCatImage
OpenButton.Visible = true; OpenButton.Active = true; OpenButton.BackgroundTransparency = 0.2
local OpenCorner = Instance.new("UICorner"); OpenCorner.CornerRadius = UDim.new(1, 0); OpenCorner.Parent = OpenButton
local OpenStroke = Instance.new("UIStroke"); OpenStroke.Color = Theme.YellowBorder; OpenStroke.Thickness = 2; OpenStroke.Parent = OpenButton

-- /// 4. KHUNG CHÍNH (MAIN FRAME) ///
local MainFrame = Instance.new("Frame")
MainFrame.Name = "MainFrame"
MainFrame.Parent = ScreenGui
MainFrame.BackgroundColor3 = Theme.Background
MainFrame.BackgroundTransparency = 0.6
MainFrame.Size = UDim2.new(0, 550, 0, 280)
MainFrame.Position = UDim2.new(0.5, -275, 0.5, -140)
MainFrame.ClipsDescendants = true

local UICorner = Instance.new("UICorner"); UICorner.CornerRadius = UDim.new(0, 10); UICorner.Parent = MainFrame
local UIStroke = Instance.new("UIStroke"); UIStroke.Color = Theme.YellowBorder; UIStroke.Thickness = 3; UIStroke.Parent = MainFrame

-- /// 5. HEADER SIÊU MỎNG (25px) ///
local Logo = Instance.new("ImageLabel"); Logo.Parent = MainFrame; Logo.BackgroundTransparency = 1; Logo.Position = UDim2.new(0, 5, 0, 3); Logo.Size = UDim2.new(0, 18, 0, 18); Logo.Image = Theme.BananaCatImage
local Title = Instance.new("TextLabel"); Title.Parent = MainFrame; Title.BackgroundTransparency = 1; Title.Position = UDim2.new(0, 28, 0, 3); Title.Size = UDim2.new(0, 200, 0, 18); Title.Font = Enum.Font.FredokaOne; Title.Text = "Banana Cat Hub"; Title.TextColor3 = Theme.YellowBorder; Title.TextSize = 14; Title.TextXAlignment = Enum.TextXAlignment.Left
local Separator = Instance.new("Frame"); Separator.Parent = MainFrame; Separator.BackgroundColor3 = Theme.YellowBorder; Separator.BorderSizePixel = 0; Separator.Position = UDim2.new(0, 0, 0, 25); Separator.Size = UDim2.new(1, 0, 0, 2)

-- Nút điều khiển
local CloseButton = Instance.new("TextButton"); CloseButton.Parent = MainFrame; CloseButton.BackgroundColor3 = Theme.Red; CloseButton.Position = UDim2.new(1, -22, 0, 4); CloseButton.Size = UDim2.new(0, 18, 0, 18); CloseButton.Font = Enum.Font.FredokaOne; CloseButton.Text = "X"; CloseButton.TextColor3 = Color3.new(1,1,1); CloseButton.TextSize = 12; local CloseCorner = Instance.new("UICorner"); CloseCorner.CornerRadius = UDim.new(0, 4); CloseCorner.Parent = CloseButton
local MinimizeButton = Instance.new("TextButton"); MinimizeButton.Parent = MainFrame; MinimizeButton.BackgroundColor3 = Theme.Orange; MinimizeButton.Position = UDim2.new(1, -44, 0, 4); MinimizeButton.Size = UDim2.new(0, 18, 0, 18); MinimizeButton.Font = Enum.Font.FredokaOne; MinimizeButton.Text = "-"; MinimizeButton.TextColor3 = Color3.new(1,1,1); MinimizeButton.TextSize = 14; local MinCorner = Instance.new("UICorner"); MinCorner.CornerRadius = UDim.new(0, 4); MinCorner.Parent = MinimizeButton

-- Logic Bật Tắt
CloseButton.MouseButton1Click:Connect(function() ScreenGui:Destroy() end)
MinimizeButton.MouseButton1Click:Connect(function() MainFrame.Visible = false end)
OpenButton.MouseButton1Click:Connect(function()
    if MainFrame.Visible then MainFrame.Visible = false else MainFrame.Visible = true; MainFrame.Size = UDim2.new(0, 550, 0, 0); TweenService:Create(MainFrame, TweenInfo.new(0.3, Enum.EasingStyle.Back), {Size = UDim2.new(0, 550, 0, 280)}):Play() end
end)

-- /// 6. HỆ THỐNG TAB (SIDEBAR ĐÃ THU HẸP) ///

-- Sidebar (Danh sách Tab)
local Sidebar = Instance.new("ScrollingFrame")
Sidebar.Name = "Sidebar"
Sidebar.Parent = MainFrame
Sidebar.Active = true
Sidebar.BackgroundColor3 = Theme.Background
Sidebar.BackgroundTransparency = 1
Sidebar.BorderSizePixel = 0
Sidebar.Position = UDim2.new(0, 5, 0, 30)
-- [THAY ĐỔI] Chiều rộng giảm xuống còn 95 (trước là 120)
Sidebar.Size = UDim2.new(0, 95, 0, 245) 
Sidebar.ScrollBarThickness = 2
Sidebar.ScrollBarImageColor3 = Theme.YellowBorder

local SidebarLayout = Instance.new("UIListLayout"); SidebarLayout.Parent = Sidebar; SidebarLayout.SortOrder = Enum.SortOrder.LayoutOrder; SidebarLayout.Padding = UDim.new(0, 5)

-- Thanh dọc ngăn cách (Tự động dời sang trái)
local VSeparator = Instance.new("Frame")
VSeparator.Parent = MainFrame
VSeparator.BackgroundColor3 = Theme.YellowBorder
VSeparator.BorderSizePixel = 0
-- [THAY ĐỔI] Dời về vị trí X=105 (Sát Sidebar mới)
VSeparator.Position = UDim2.new(0, 105, 0, 25) 
VSeparator.Size = UDim2.new(0, 2, 1, -25)

-- Container (Nơi chứa nút chức năng)
local PageContainer = Instance.new("Frame")
PageContainer.Name = "PageContainer"
PageContainer.Parent = MainFrame
PageContainer.BackgroundTransparency = 1
-- [THAY ĐỔI] Dời về vị trí X=115
PageContainer.Position = UDim2.new(0, 115, 0, 30) 
-- [THAY ĐỔI] Tăng chiều rộng lên 425 (Tận dụng khoảng trống)
PageContainer.Size = UDim2.new(0, 425, 0, 240)

-- Biến lưu trữ các Tab
local Tabs = {}
local FirstTab = nil

-- Hàm tạo Tab mới
local function CreateTab(TabName)
    local TabButton = Instance.new("TextButton")
    TabButton.Parent = Sidebar
    TabButton.BackgroundColor3 = Theme.Button
    TabButton.Size = UDim2.new(1, 0, 0, 25)
    TabButton.Font = Enum.Font.GothamBold
    TabButton.Text = TabName
    TabButton.TextColor3 = Theme.Text
    TabButton.TextSize = 11 -- [THAY ĐỔI] Giảm cỡ chữ xuống 11 cho vừa khung hẹp
    local TCorner = Instance.new("UICorner"); TCorner.CornerRadius = UDim.new(0, 4); TCorner.Parent = TabButton
    
    local Page = Instance.new("ScrollingFrame")
    Page.Name = TabName .. "_Page"
    Page.Parent = PageContainer
    Page.BackgroundTransparency = 1
    Page.Size = UDim2.new(1, 0, 1, 0)
    Page.ScrollBarThickness = 2
    Page.ScrollBarImageColor3 = Theme.YellowBorder
    Page.Visible = false
    
    local PageLayout = Instance.new("UIListLayout"); PageLayout.Parent = Page; PageLayout.SortOrder = Enum.SortOrder.LayoutOrder; PageLayout.Padding = UDim.new(0, 5)
    local PagePadding = Instance.new("UIPadding"); PagePadding.Parent = Page; PagePadding.PaddingTop = UDim.new(0, 5); PagePadding.PaddingLeft = UDim.new(0, 5)
    
    TabButton.MouseButton1Click:Connect(function()
        for _, item in pairs(PageContainer:GetChildren()) do if item:IsA("ScrollingFrame") then item.Visible = false end end
        for _, btn in pairs(Sidebar:GetChildren()) do if btn:IsA("TextButton") then btn.BackgroundColor3 = Theme.Button; btn.TextColor3 = Theme.Text end end
        Page.Visible = true
        TabButton.BackgroundColor3 = Theme.YellowBorder
        TabButton.TextColor3 = Color3.new(0,0,0)
    end)
    
    if FirstTab == nil then FirstTab = {Button = TabButton, Page = Page} end
    return Page
end

-- Hàm tạo nút chức năng
local function AddButton(Page, Text, Callback)
    local Button = Instance.new("TextButton")
    Button.Parent = Page
    Button.BackgroundColor3 = Theme.Button
    Button.Size = UDim2.new(1, -10, 0, 30)
    Button.Font = Enum.Font.GothamBold
    Button.Text = Text
    Button.TextColor3 = Theme.Text
    Button.TextSize = 14
    
    local BCorner = Instance.new("UICorner"); BCorner.CornerRadius = UDim.new(0, 6); BCorner.Parent = Button
    local BStroke = Instance.new("UIStroke"); BStroke.Color = Theme.YellowBorder; BStroke.Thickness = 1; BStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border; BStroke.Parent = Button
    
    Button.MouseButton1Click:Connect(function()
        TweenService:Create(Button, TweenInfo.new(0.1), {Size = UDim2.new(1, -20, 0, 28)}):Play()
        task.wait(0.1)
        TweenService:Create(Button, TweenInfo.new(1, -10, 0, 30)}):Play()
        Callback()
    end)
end

-- /// 7. TẠO 14 TAB ///
local Tab1 = CreateTab("Trạng thái")
local Tab2 = CreateTab("Máy chủ")
local Tab3 = CreateTab("Chung")
local Tab4 = CreateTab("Biển")
local Tab5 = CreateTab("Vật phẩm")
local Tab6 = CreateTab("Trái & Raid")
local Tab7 = CreateTab("Di chuyển")
local Tab8 = CreateTab("Cửa hàng")
local Tab9 = CreateTab("Tộc v4")
local Tab10 = CreateTab("Leviathan")
local Tab11 = CreateTab("Núi lửa")
local Tab12 = CreateTab("Đảo cáo")
local Tab13 = CreateTab("Định vị")
local Tab14 = CreateTab("Cài đặt")

if FirstTab then FirstTab.Button.BackgroundColor3 = Theme.YellowBorder; FirstTab.Button.TextColor3 = Color3.new(0,0,0); FirstTab.Page.Visible = true end

-- /// 8. VÍ DỤ NÚT (TEST) ///
AddButton(Tab1, "Xem thông tin", function() print("Info") end)
AddButton(Tab3, "Auto Farm Level", function() print("Farming...") end)
AddButton(Tab7, "Teleport Sea 3", function() print("TP") end)

-- Kéo thả
local function MakeDraggable(object)
    local dragging, dragInput, dragStart, startPos
    object.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
            dragging = true; dragStart = input.Position; startPos = object.Position
            input.Changed:Connect(function() if input.UserInputState == Enum.UserInputState.End then dragging = false end end)
        end
    end)
    object.InputChanged:Connect(function(input) if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then dragInput = input end end)
    UserInputService.InputChanged:Connect(function(input) if input == dragInput and dragging then local delta = input.Position - dragStart; TweenService:Create(object, TweenInfo.new(0.05), {Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)}):Play() end end)
end
MakeDraggable(MainFrame)
MakeDraggable(OpenButton)
