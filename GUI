-- /////////////////////////////////////////////////////////////
-- /// BANANA CAT HUB - ORION LIBRARY (STABLE) ///
-- /////////////////////////////////////////////////////////////

-- 1. CH·ªêNG AFK (TREO M√ÅY)
local VirtualUser = game:GetService("VirtualUser")
game:GetService("Players").LocalPlayer.Idled:Connect(function()
    VirtualUser:CaptureController()
    VirtualUser:ClickButton2(Vector2.new())
end)

-- 2. T·∫¢I TH∆Ø VI·ªÜN ORION
local OrionLib = loadstring(game:HttpGet(('https://raw.githubusercontent.com/shlexware/Orion/main/source')))()

-- 3. T·∫†O C·ª¨A S·ªî (WINDOW)
local Window = OrionLib:MakeWindow({
    Name = "Banana Cat Hub üçå | V3 Stable",
    HidePremium = false,
    SaveConfig = true,
    ConfigFolder = "BananaCatConfig",
    IntroText = "Banana Cat Hub",
    IntroIcon = "rbxassetid://13693437997"
})

-- Th√¥ng b√°o ch√†o m·ª´ng
OrionLib:MakeNotification({
    Name = "Xin ch√†o!",
    Content = "Script ƒë√£ t·∫£i th√†nh c√¥ng! Kh√¥ng l·ªói.",
    Image = "rbxassetid://13693437997",
    Time = 5
})

-- /////////////////////////////////////////////////////////////
-- /// TAB 1: TR·∫†NG TH√ÅI (STATUS & INFO) ///
-- /////////////////////////////////////////////////////////////
local StatusTab = Window:MakeTab({
    Name = "Tr·∫°ng th√°i",
    Icon = "rbxassetid://4483345998",
    PremiumOnly = false
})

-- Section: Th√¥ng tin nh√¢n v·∫≠t
local SectionPlayer = StatusTab:AddSection({ Name = "Th√¥ng Tin Nh√¢n V·∫≠t" })

local Lb_Name = StatusTab:AddLabel("T√™n: Loading...")
local Lb_Level = StatusTab:AddLabel("C·∫•p ƒë·ªô: Loading...")
local Lb_Beli = StatusTab:AddLabel("Beli: Loading...")
local Lb_Frag = StatusTab:AddLabel("Fragment: Loading...")
local Lb_Race = StatusTab:AddLabel("T·ªôc: Loading...")
local Lb_Fruit = StatusTab:AddLabel("Tr√°i: Loading...")

-- Section: Tr·∫°ng th√°i Server
local SectionServer = StatusTab:AddSection({ Name = "Tr·∫°ng Th√°i Server" })

local Lb_Moon = StatusTab:AddLabel("Full Moon: ...")
local Lb_Mirage = StatusTab:AddLabel("Mirage: ...")
local Lb_Kitsune = StatusTab:AddLabel("Kitsune: ...")
local Lb_Frozen = StatusTab:AddLabel("Frozen Dimension: ...")
local Lb_DimKill = StatusTab:AddLabel("Dough King Kills: ...")
local Lb_Indra = StatusTab:AddLabel("Rip_Indra: ...")
local Lb_Elite = StatusTab:AddLabel("Elite Hunter: ...")
local Lb_Sword = StatusTab:AddLabel("Legendary Sword: ...")

-- /////////////////////////////////////////////////////////////
-- /// LOGIC C·∫¨P NH·∫¨T T·ª∞ ƒê·ªòNG (AUTO UPDATE LOOP) ///
-- /////////////////////////////////////////////////////////////

-- H√†m l·∫•y tr·∫°ng th√°i trƒÉng
local function GetMoonStatus()
    local Phase = game.Lighting:GetMoonPhase()
    if Phase == Enum.MoonPhase.Full then return "‚úÖ ƒêANG C√ì (100%)"
    elseif Phase == Enum.MoonPhase.WaxingGibbous then return "‚è≥ C√≤n 1 ng√†y"
    elseif Phase == Enum.MoonPhase.FirstQuarter then return "‚è≥ C√≤n 2 ng√†y"
    elseif Phase == Enum.MoonPhase.WaxingCrescent then return "‚è≥ C√≤n 3 ng√†y"
    elseif Phase == Enum.MoonPhase.New then return "üåë TrƒÉng non"
    else return "‚ùå ƒê√£ qua / Ch·ªù cycle m·ªõi" end
end

-- H√†m l·∫•y s·ªë qu√°i Dough King
local function GetDoughKingCount()
    if workspace.Map:FindFirstChild("Cake Loaf") then
        local CounterFrame = workspace.Map["Cake Loaf"]
        if CounterFrame:FindFirstChild("Frames") and CounterFrame.Frames:FindFirstChild("Counter") then
            local Text = CounterFrame.Frames.Counter.TextLabel.Text
            local Count = tonumber(string.match(Text, "%d+"))
            if Count then return "ƒê√£ gi·∫øt: " .. Count .. " (C√≤n " .. (500 - Count) .. ")" end
        end
    end
    return "N/A (Ch∆∞a v√†o Cake Land)"
end

-- V√≤ng l·∫∑p c·∫≠p nh·∫≠t (Ch·∫°y ng·∫ßm)
task.spawn(function()
    while task.wait(1) do
        pcall(function()
            local Plr = game.Players.LocalPlayer
            
            -- 1. C·∫≠p nh·∫≠t Player
            Lb_Name:Set("T√™n: " .. Plr.DisplayName)
            
            if Plr:FindFirstChild("Data") then
                local D = Plr.Data
                if D:FindFirstChild("Level") then Lb_Level:Set("C·∫•p ƒë·ªô: " .. D.Level.Value) end
                if D:FindFirstChild("Fragments") then Lb_Frag:Set("Fragment: " .. D.Fragments.Value) end
                if D:FindFirstChild("Race") then Lb_Race:Set("T·ªôc: " .. D.Race.Value) end
                if D:FindFirstChild("DevilFruit") then Lb_Fruit:Set("Tr√°i: " .. D.DevilFruit.Value) end
            end
            if Plr:FindFirstChild("leaderstats") and Plr.leaderstats:FindFirstChild("Beli") then
                 Lb_Beli:Set("Beli: $" .. Plr.leaderstats.Beli.Value)
            end

            -- 2. C·∫≠p nh·∫≠t Server
            Lb_Moon:Set("Full Moon: " .. GetMoonStatus())

            if workspace._WorldOrigin.Locations:FindFirstChild("Mirage Island") then 
                Lb_Mirage:Set("Mirage: ‚úÖ ƒê√É C√ì") 
            else 
                Lb_Mirage:Set("Mirage: ‚ùå Ch∆∞a c√≥") 
            end

            if workspace.Map:FindFirstChild("Kitsune Island") then 
                Lb_Kitsune:Set("Kitsune: ‚úÖ ƒê√É C√ì") 
            else 
                Lb_Kitsune:Set("Kitsune: ‚ùå Ch∆∞a c√≥") 
            end

            if workspace.Map:FindFirstChild("Frozen Dimension") then 
                Lb_Frozen:Set("Frozen Dimension: ‚úÖ C·ªïng M·ªü") 
            else 
                Lb_Frozen:Set("Frozen Dimension: ‚ùå ƒê√≥ng") 
            end

            Lb_DimKill:Set("Dough King: " .. GetDoughKingCount())

            if workspace.Enemies:FindFirstChild("rip_indra True Form") then 
                Lb_Indra:Set("Rip_Indra: ‚öîÔ∏è ƒêANG ƒê√ÅNH") 
            else 
                Lb_Indra:Set("Rip_Indra: ‚ùå Ch∆∞a c√≥") 
            end

            -- Elite Check
            local EliteFound = false
            if workspace.Enemies then
                for _, v in pairs(workspace.Enemies:GetChildren()) do
                    if v.Name == "Deandre" or v.Name == "Diablo" or v.Name == "Urban" then
                        Lb_Elite:Set("Elite Hunter: üéØ " .. v.Name)
                        EliteFound = true
                        break
                    end
                end
            end
            if not EliteFound then Lb_Elite:Set("Elite Hunter: ‚ùå Ch∆∞a c√≥") end
            
            -- Legendary Sword
            if workspace:FindFirstChild("Legendary Sword Dealer") then
                Lb_Sword:Set("Legendary Sword: ‚úÖ ƒêang b√°n")
            else
                Lb_Sword:Set("Legendary Sword: ‚ùå V·∫Øng m·∫∑t")
            end

        end)
    end
end)

-- /////////////////////////////////////////////////////////////
-- /// T·∫†O C√ÅC TAB C√íN L·∫†I (PLACEHOLDER) ///
-- /////////////////////////////////////////////////////////////

-- H√†m t·∫°o Tab nhanh
local function MakeTab(Name)
    return Window:MakeTab({ Name = Name, Icon = "rbxassetid://4483345998", PremiumOnly = false })
end

local Tab2 = MakeTab("M√°y ch·ªß")
local Tab3 = MakeTab("Chung")
local Tab4 = MakeTab("Bi·ªÉn")
local Tab5 = MakeTab("V·∫≠t ph·∫©m")
local Tab6 = MakeTab("Tr√°i & Raid")
local Tab7 = MakeTab("Di chuy·ªÉn")
local Tab8 = MakeTab("C·ª≠a h√†ng")
local Tab9 = MakeTab("T·ªôc v4")
local Tab10 = MakeTab("Leviathan")
local Tab11 = MakeTab("N√∫i l·ª≠a")
local Tab12 = MakeTab("ƒê·∫£o c√°o")
local Tab13 = MakeTab("ƒê·ªãnh v·ªã")
local Tab14 = MakeTab("C√†i ƒë·∫∑t")

-- /////////////////////////////////////////////////////////////
-- /// TH√äM CH·ª®C NƒÇNG M·∫™U ///
-- /////////////////////////////////////////////////////////////

-- Tab 2: M√°y ch·ªß
Tab2:AddButton({
    Name = "Rejoin Server (V√†o l·∫°i)",
    Callback = function()
        game:GetService("TeleportService"):TeleportToPlaceInstance(game.PlaceId, game.JobId, game.Players.LocalPlayer)
    end
})

-- Tab 3: Chung
Tab3:AddToggle({
    Name = "Auto Farm Level (Coming Soon)",
    Default = false,
    Callback = function(Value)
        print("Auto Farm:", Value)
    end
})

-- Tab 7: Di chuy·ªÉn
local SeaSection = Tab7:AddSection({ Name = "Teleport Sea" })
SeaSection:AddButton({ Name = "Teleport Sea 1", Callback = function() print("TP 1") end })
SeaSection:AddButton({ Name = "Teleport Sea 2", Callback = function() print("TP 2") end })
SeaSection:AddButton({ Name = "Teleport Sea 3", Callback = function() print("TP 3") end })

-- Tab 14: C√†i ƒë·∫∑t
Tab14:AddButton({
    Name = "H·ªßy Script (T·∫Øt GUI)",
    Callback = function()
        OrionLib:Destroy()
    end
})

-- KH·ªûI CH·∫†Y ORION
OrionLib:Init()
